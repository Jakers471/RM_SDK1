# Risk Manager Daemon Environment Configuration
# Copy this file to .env and fill in your actual values

# ============================================
# BROKER CONNECTION (Required for live mode)
# ============================================

# TopstepX API credentials
PROJECT_X_API_KEY=your_api_key_here
PROJECT_X_USERNAME=your_username_here

# ============================================
# RISK DAEMON CONFIGURATION
# ============================================

# Trading account ID to monitor
RISK_DAEMON_ACCOUNT_ID=12345

# Daemon mode: 'live' or 'test'
# - live: Connects to real broker (requires API credentials)
# - test: Uses mock broker for testing
RISK_DAEMON_MODE=test

# Database path for state persistence
RISK_DAEMON_DB_PATH=./data/risk_state.db

# ============================================
# RISK RULES CONFIGURATION
# ============================================

# Maximum total contracts allowed across all positions
RISK_RULES_MAX_CONTRACTS=10

# Daily loss limit (negative value in dollars)
RISK_RULES_DAILY_LOSS_LIMIT=-1000

# Per-position unrealized loss limit (negative value in dollars)
RISK_RULES_UNREALIZED_LOSS_LIMIT=-500

# Session block time (24-hour format, e.g., "15:00" for 3pm CT)
RISK_RULES_SESSION_END_TIME=15:00

# ============================================
# NOTIFICATION SETTINGS (Optional)
# ============================================

# Email notifications
NOTIFICATION_EMAIL_ENABLED=false
NOTIFICATION_EMAIL_TO=trader@example.com
NOTIFICATION_EMAIL_FROM=risk-daemon@example.com
NOTIFICATION_EMAIL_SMTP_HOST=smtp.gmail.com
NOTIFICATION_EMAIL_SMTP_PORT=587
NOTIFICATION_EMAIL_SMTP_USER=
NOTIFICATION_EMAIL_SMTP_PASS=

# Webhook notifications (for Slack, Discord, etc.)
NOTIFICATION_WEBHOOK_ENABLED=false
NOTIFICATION_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ============================================
# MONITORING & LOGGING
# ============================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file path
LOG_FILE_PATH=./logs/risk_daemon.log

# Metrics port for Prometheus scraping (0 to disable)
METRICS_PORT=9090

# ============================================
# ADVANCED SETTINGS
# ============================================

# Retry settings for transient failures
RETRY_MAX_ATTEMPTS=3
RETRY_DELAY_BASE_SECONDS=1.0

# WebSocket reconnection settings
WEBSOCKET_RECONNECT_ENABLED=true
WEBSOCKET_RECONNECT_DELAY_SECONDS=5
WEBSOCKET_MAX_RECONNECT_ATTEMPTS=10

# State persistence interval (seconds)
STATE_PERSISTENCE_INTERVAL=60

# ============================================
# FEATURE FLAGS
# ============================================

# Enable/disable specific risk rules
FEATURE_ENABLE_MAX_CONTRACTS=true
FEATURE_ENABLE_DAILY_LOSS=true
FEATURE_ENABLE_UNREALIZED_LOSS=true
FEATURE_ENABLE_SESSION_BLOCK=true
FEATURE_ENABLE_NO_STOP_LOSS_GRACE=false
FEATURE_ENABLE_MAX_CONTRACTS_PER_INSTRUMENT=false
FEATURE_ENABLE_DAILY_REALIZED_PROFIT=false
FEATURE_ENABLE_UNREALIZED_PROFIT=false
FEATURE_ENABLE_TRADE_FREQUENCY_LIMIT=false
FEATURE_ENABLE_COOLDOWN_AFTER_LOSS=false
FEATURE_ENABLE_SYMBOL_BLOCK=false
FEATURE_ENABLE_AUTH_LOSS_GUARD=false

# Enable/disable monitors
FEATURE_ENABLE_STOP_LOSS_DETECTOR=true

# ============================================
# DEPLOYMENT NOTES
# ============================================

# For production deployment:
# 1. Copy this file to .env
# 2. Fill in your actual API credentials
# 3. Set RISK_DAEMON_MODE=live
# 4. Configure appropriate risk limits for your account
# 5. Set up notification endpoints if desired
# 6. Run: python -m src.main --account-id YOUR_ACCOUNT_ID

# For testing:
# 1. Keep RISK_DAEMON_MODE=test
# 2. No API credentials needed
# 3. Run: python -m src.main --account-id 12345 --test-mode

# Security notes:
# - Never commit .env file to version control
# - Keep API credentials secure
# - Use environment-specific .env files (.env.production, .env.staging)
# - Consider using a secrets manager for production deployments